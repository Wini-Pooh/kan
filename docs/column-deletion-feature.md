# Функциональность удаления колонок с автоматическим архивированием задач

## Описание
Реализована функциональность автоматического архивирования задач при удалении колонки. Теперь при удалении колонки все содержащиеся в ней задачи автоматически архивируются, а затем колонка удаляется.

## Изменения

### 1. Backend (ColumnController.php)
- Изменен метод `destroy()` в `ColumnController`
- Удалена проверка на наличие задач в колонке, блокирующая удаление
- Добавлено автоматическое архивирование всех неархивированных задач в колонке перед её удалением
- Обновлено сообщение об успешном удалении с указанием количества архивированных задач

### 2. Frontend (space.blade.php)
- Обновлена функция `deleteColumn()` в JavaScript
- Добавлена проверка количества задач в колонке
- Изменено предупреждающее сообщение в зависимости от наличия задач
- Добавлено автоматическое обновление страницы после архивирования задач

## Логика работы

1. **Проверка прав доступа**: Пользователь должен иметь доступ к пространству
2. **Проверка возможности удаления**: Нельзя удалить встроенные колонки (`is_default = true`)
3. **Архивирование задач**: Все неархивированные задачи в колонке получают:
   - `archived_at = now()`
   - `archived_by = текущий_пользователь`
4. **Удаление колонки**: После архивирования задач колонка удаляется
5. **Уведомление пользователя**: Сообщение содержит информацию о количестве архивированных задач

## Пользовательский интерфейс

### Предупреждающие сообщения:
- **Если в колонке есть задачи**: "Вы уверены, что хотите удалить эту колонку? В ней находится X задач(и), которые будут автоматически архивированы."
- **Если колонка пустая**: "Вы уверены, что хотите удалить эту колонку?"

### Сообщения об успехе:
- **С архивированием**: "Колонка успешно удалена. X задач(и) были автоматически архивированы."
- **Без архивирования**: "Колонка успешно удалена"

## Технические детали

### Модели:
- `Column::allTasks()` - получает все задачи включая архивированные
- `Task::scopeNotArchived()` - фильтрует только неархивированные задачи
- `Task::archived_at` и `Task::archived_by` - поля для архивирования

### Логирование:
Все операции логируются с указанием:
- ID пользователя
- ID колонки и пространства
- Количество архивированных задач
- Результат операции

## Безопасность
- Архивировать задачи могут только пользователи с доступом к пространству
- Нельзя удалить встроенные колонки (`todo`, `progress`, `done`)
- Все действия логируются для аудита

## Доступ к архивированным задачам
Архивированные задачи остаются доступными через:
- Страницу архива пространства (`/organizations/{org}/spaces/{space}/archive`)
- Возможность разархивирования отдельных задач
